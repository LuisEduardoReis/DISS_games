<!DOCTYPE html>
<body>

<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="lib/default.min.css">
<script src="lib/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<h2> Hangman </h2>

<div id="demo">
	<h1 id="word"></h1> 
	<h3 id="fails"></h3>
	<input id="letter" type="text" maxlength="1">
	<button id="try" onclick="tryLetter()">Try</button>
	<h3 id="result"></h3>
	
	<script>
	// Variables
	var words = ["abacate","banana","cereja"];
	var solution = words[Math.floor(Math.random()*words.length)];
	var word = "";
	var fails = [];
	var maxFails = 4;
	
	// Generate the initial word using a while cycle
	while(word.length < solution.length) word = word + "*";
	
	// HTML Elements
	var wordElement = document.getElementById("word");
	var failsElement = document.getElementById("fails");
	var letterElement = document.getElementById("letter");
	var tryElement = document.getElementById("try");
	var resultElement = document.getElementById("result");
				
	// Function to set/reset the HTML elements
	function resetInterface() {
		// Set the word element"s text
		wordElement.innerHTML = word;
		// Reset the letter input
		letterElement.value = "";
		
		// Set the number of fails element"s text
		if (fails.length > 0) {
			failsElement.innerHTML = "Fails: " + fails.toString() + " (" + fails.length + "/" + maxFails + ")";
		} else 
			failsElement.innerHTML = "";
		
		// Set the result element"s text
		if (fails.length > maxFails) 
			resultElement.innerHTML = "You lose! The word was \"" + solution + "\"";
		else if (word == solution) 
			resultElement.innerHTML = "You win!";
	}
	
	// Initially reset the interface
	resetInterface();
	
	// Function for the "Try" button
	function tryLetter() {
		// Get the letter from the input element
		var letter = letterElement.value.toLowerCase();
		
		if (letter == "") return; // Ignore it if it's empty
		var success = false; // Assume it is a fail
		
		// Iterate over the solution's letters and see if the input letter is there
		for(var i = 0; i < word.length; i++) {
			if (solution[i] == letter) { 
				// Lable this letter as a success
				success = true;
				// Replace the corresponding "*" on the game word
				word = word.substring(0,i) + letter + word.substring(i+1,word.length);
			}
		}
		
		if (!success) fails.push(letter); // In case of fail, add this letter to fail list
		
		// Refresh the interface with the new values
		resetInterface();
	}
	</script>
</div>

<a href="./">Índice</a>

<p> Em português "O Jogo do Enforcado", este é um jogo simples para duas pessoas. Uma escolhe uma palavra e a outra tenta adivinha-la dizendo uma letra de cada vez, tendo um dado número de tentativas.</p>

<p>Na implementação que iremos fazer o computador irá jogar como a pessoa que escolhe a palavra. Irá mostrar a palavra parcial no ecrã, atualiza-la com as letras escolhidas e contar o número de tentativas falhadas.</p>

<br>
<h3> O template </h3>

<pre><code class="html">&lt;html&gt;
	&lt;head&gt;
		&lt;title&gt;Hangman&lt;/title&gt;		
	&lt;/head&gt;
	
	&lt;body&gt;
		&lt;h1 id=&quot;word&quot;&gt;&lt;/h1&gt; 
		&lt;h3 id=&quot;fails&quot;&gt;&lt;h3&gt;
		&lt;input id=&quot;letter&quot; type=&quot;text&quot; maxlength=&quot;1&quot;&gt;
		&lt;button id=&quot;try&quot;&gt;Try&lt;/button&gt;
		&lt;h3 id=&quot;result&quot;&gt;&lt;/h3&gt;
	&lt;/body&gt;
	
	&lt;script&gt;
	&lt;/script&gt;
&lt;/html&gt;
</code></pre>

<p>Este será o html com que iremos trabalhar. Todos os elementos tem um <b>id</b> a partir do qual podemos referir-nos a eles.</p>
<ul>
	<li> O h1 <b>word</b> é um cabeçalho onde vamos colocar a nossa palavra escondida.</li>
	<li> O h3 <b>fails</b> é um cabeçalho mais pequeno onde vamos colocar informação sobre tentativas falhadas ao jogador.</li>
	<li> O input <b>letter</b> é a caixa de texto onde vamos receber uma letra do jogador. Note-se o parametro "maxLength" igual a 1 que impede que o utilizador coloque mais do que uma letra </li>
	<li> O botão <b>try</b> é o botão que irá dispoletar a jogada do jogador. </li>
	<li> Finalmente, o h3 <b>result</b> é um cabeçalho onde vamos colocar o resultado do jogo ("ganhou"/"perdeu").</li>	
</ul>


<br>
<h3> As variáveis </h3>

<pre><code class="javascript">// Variables
var words = [&quot;abacate&quot;,&quot;banana&quot;,&quot;cereja&quot;];
var solution = words[Math.floor(Math.random()*words.length)];
var word = &quot;&quot;;
var fails = [];
var maxFails = 4;
</code></pre>

<ul>
	<li> <b>words</b> é um array onde vão estar as palavras possiveis para o computador escolher. Neste exemplo temos apenas 3.</li>
	<li> <b>solution</b> é a palavra que o computador escolhe, escolhida do array de palavras anterior.</li>
	<li> <b>word</b> é o estado da palavra à medida que o outro jogador a adivinha. Inicialmente é composta apenas de asteriscos mas estes vão sendo substituidos pelas letras corretas à medida que o jogador adivinha. Para já vamos inicializa-la com uma palavra vazia e a seguir colocamos os asteriscos.</li>
	<li> <b>fails</b> é um array para guardar as letras que o jogador experimentou mas falhou.</li>
	<li> <b>maxFails</b> é o número maximo de tentativas falhadas permitido.</li>
</ul>

<p>Agora precisamos de adicionar à palavra guardada na variável word o número correto de asteriscos. Para isso vamos usar um ciclo. Vamos usar um ciclo <b>while</b> que tem a seguinte estrutura:</p>

<pre><code class="javascript">while (condição) operação;</code></pre>

<p> Um ciclo while efetua a sua operação enquanto a condição for verdadeira. Se a condição for sempre verdadeira temos um ciclo infinito!</p>

<p> Para adicionar os nossos asteriscos vamos usar o seguinte código:</p>

<pre><code class="javascript">// Generate the initial word using a while cycle
while(word.length &lt; solution.length) word = word + &quot;*&quot;;
</code></pre>

<p>Aqui a condição é "a palavra ter um tamanho inferior ao da solução" e a operação é "adicionar um asterisco à palavra". Efetivamente, quando o ciclo acabar, a palavra terá o tamanho da solução em asteriscos.</p>

<p>Finalmente vamos criar variaveis para cada um dos elementos do html para ser mais facil aceder-lhes:</p>

<pre><code class="javascript">// HTML Elements
var wordElement = document.getElementById(&quot;word&quot;);
var failsElement = document.getElementById(&quot;fails&quot;);
var letterElement = document.getElementById(&quot;letter&quot;);
var tryElement = document.getElementById(&quot;try&quot;);
var resultElement = document.getElementById(&quot;result&quot;);</code></pre>



<br>
<h3> Povoando o interface </h3>

<p>Se carregarmos a pagina atualmente deverá aparecer apenas a caixa de input de texto e o botão que criamos.</p>

<img src="images/hangman-1.png"></img>

<p>Vamos inserir o conteudo correto em cada elemento do html. Primeiro colocamos a palavra e limpamos a caixa de input de texto (vai ser importante mais tarde).</p>

<pre><code class="javascript">// Set the word element&quot;s text
wordElement.innerHTML = word;
// Reset the letter input
letterElement.value = &quot;&quot;;
</code></pre>

<p>A seguir vamos preencher o cabeçalho que mostra as letras falhadas e o número maximo de tentativas. Vamos usar um if para que só apareça quando o numero de tentativas falhadas for maior que 0.</p>

<pre><code class="javascript">// Set the number of fails element&quot;s text
if (fails.length &gt; 0) {
	failsElement.innerHTML = &quot;Fails: &quot; + fails.toString() + &quot; (&quot; + fails.length + &quot;/&quot; + maxFails + &quot;)&quot;;
} else 
	failsElement.innerHTML = &quot;&quot;;
</code></pre>

<p> Finalmente preenchemos o cabeçalho do resultado. Existem três casos possiveis:  </p>
<ul>
	<li>O jogador ultrapassou o limite de falhas e temos de mostrar uma mensagem de derrota.</li>
	<li>Senão, se o jogador tiver chegado à solução, ou seja, quando a palavra atual for igual à solução, mostramos uma mensagem de vitoria.</li>
	<li>Em qualquer outro caso, não mostramos nada.</li>
</ul>

<pre><code class="javascript">// Set the result element&quot;s text
if (fails.length &gt; maxFails) 
	resultElement.innerHTML = &quot;You lose! The word was \&quot;&quot; + solution + &quot;\&quot;&quot;;
else if (word == solution) 
	resultElement.innerHTML = &quot;You win!&quot;;
else
	resultElement.innerHTML = &quot;&quot;;
</code></pre>



